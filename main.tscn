[gd_scene load_steps=58 format=3 uid="uid://bburjqwqg71by"]

[ext_resource type="Script" path="res://Scripts/NPCController.cs" id="1_0cfmg"]
[ext_resource type="PackedScene" uid="uid://cal1figiv4byh" path="res://modules/FPSCounter/fpscounter.tscn" id="1_jf3cv"]
[ext_resource type="Script" path="res://Scripts/XRayManager.cs" id="1_k6ho4"]
[ext_resource type="Script" path="res://Scripts/NPCCreator.cs" id="1_olf47"]
[ext_resource type="Texture2D" uid="uid://c3rud0nehsh34" path="res://Images/UI/Main/Wall.PNG" id="2_4kdnl"]
[ext_resource type="Texture2D" uid="uid://wbo7yx08rfpd" path="res://Images/UI/Main/BG/Sky.PNG" id="2_kjyi1"]
[ext_resource type="PackedScene" uid="uid://cfghkkaxcybkb" path="res://modules/DialogueManagerPrerequisites/Scenes/DialogueNPCSignal.tscn" id="2_sniyy"]
[ext_resource type="PackedScene" uid="uid://dd2a8ofih5akl" path="res://modules/DialogueManagerPrerequisites/Balloons/noIconBalloon.tscn" id="3_jli1w"]
[ext_resource type="PackedScene" uid="uid://bvuujxl634baj" path="res://modules/DialogueManagerPrerequisites/Scenes/DialogueHandler.tscn" id="3_m45lx"]
[ext_resource type="Texture2D" uid="uid://vpbu0uxfwxlc" path="res://Images/UI/Main/Desk.PNG" id="3_rf5ro"]
[ext_resource type="Texture2D" uid="uid://cx7hf71ygt40a" path="res://Images/Bodies/Male/Outer Bodies/Heads/Head 2.PNG" id="3_uil03"]
[ext_resource type="Texture2D" uid="uid://b7dv1iker83r1" path="res://Images/UI/Main/BG/Stars.PNG" id="3_vvaag"]
[ext_resource type="Texture2D" uid="uid://bhvhrtw5kwanc" path="res://Images/UI/Main/Window/Frame.PNG" id="4_j4hjr"]
[ext_resource type="Texture2D" uid="uid://c0y8p8f4etvu2" path="res://Images/Bodies/Male/Outer Bodies/Heads/Head 3.PNG" id="4_udkc8"]
[ext_resource type="Texture2D" uid="uid://bywk20ymwnqkw" path="res://Images/UI/Main/BG/Snow/Full Snow.PNG" id="4_uow0l"]
[ext_resource type="Texture2D" uid="uid://48xteqc42tnf" path="res://Images/UI/Main/Window/White Glass.png" id="6_3eqmv"]
[ext_resource type="Texture2D" uid="uid://fitadpk8q402" path="res://Images/Bodies/Male/Outer Bodies/Lips/Lips 2.PNG" id="6_kpexn"]
[ext_resource type="Texture2D" uid="uid://cvi48eowcf80d" path="res://Images/Bodies/Male/Outer Bodies/Lips/Lips 3.PNG" id="7_3hp3w"]
[ext_resource type="Texture2D" uid="uid://hc68c2s66ol5" path="res://Images/Bodies/Male/Outer Bodies/Noses/Nose 2.PNG" id="9_ht1l8"]
[ext_resource type="Texture2D" uid="uid://dxb1wq3wk07av" path="res://Images/Bodies/Male/Outer Bodies/Noses/Nose 3.PNG" id="10_78i85"]
[ext_resource type="Texture2D" uid="uid://cnx5r3bennc7u" path="res://icon.svg" id="10_w5o83"]
[ext_resource type="Script" path="res://Scripts/GameManager.cs" id="11_g7kqk"]
[ext_resource type="Texture2D" uid="uid://bu1e5l7mx6x3a" path="res://Images/Bodies/Male/Outer Bodies/Hairstyles/Hair 2.PNG" id="12_umw15"]
[ext_resource type="Texture2D" uid="uid://cdtmgahapx0kv" path="res://Images/UI/Main/BG/Wall.png" id="13_4jyuk"]
[ext_resource type="Texture2D" uid="uid://x05vy3jw0n7h" path="res://Images/Bodies/Male/Outer Bodies/Hairstyles/Hair 3.PNG" id="13_ioy20"]
[ext_resource type="Texture2D" uid="uid://bx7cwm5lp37ag" path="res://Images/Bodies/Male/Outer Bodies/Hairstyles/Hair 4.PNG" id="14_n1vce"]
[ext_resource type="PackedScene" uid="uid://cln1k7d7si5eo" path="res://Prefabs/XRayArea.tscn" id="15_88key"]
[ext_resource type="Texture2D" uid="uid://cihqemsmvm2x6" path="res://Images/Bodies/Male/Outer Bodies/Ears/Ears 2.PNG" id="16_tfuhk"]
[ext_resource type="Texture2D" uid="uid://bv205g738btbc" path="res://Images/Bodies/Male/Outer Bodies/Ears/Ears 3.PNG" id="17_kpjnd"]
[ext_resource type="Script" path="res://Scripts/Eyes.cs" id="22_n64gu"]
[ext_resource type="Texture2D" uid="uid://0e8opw1dhwyo" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 2/Iris/Colour.PNG" id="24_pypo5"]
[ext_resource type="Texture2D" uid="uid://ouu0xidkplu2" path="res://Images/Bodies/Male/Outer Bodies/Ears/Ears 1.PNG" id="25_h0c38"]
[ext_resource type="Texture2D" uid="uid://dmg17u1rc8o10" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 2/Iris/Ink.PNG" id="25_udg0u"]
[ext_resource type="Texture2D" uid="uid://dg6idqfaj03tv" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 2/Sclera.PNG" id="26_yeq8w"]
[ext_resource type="Texture2D" uid="uid://ps13cardcxy4" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 1/Iris/Colour.PNG" id="27_kvtur"]
[ext_resource type="Texture2D" uid="uid://wb1y6837rkei" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 1/Iris/Ink.PNG" id="28_6ywi3"]
[ext_resource type="Texture2D" uid="uid://u3dmrxyqfo5p" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 3/Iris/Colour.PNG" id="28_iaf5f"]
[ext_resource type="Texture2D" uid="uid://2nq3m15oogty" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 1/Sclera.PNG" id="29_i14k2"]
[ext_resource type="Texture2D" uid="uid://b6m8vq5kfhmab" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 3/Iris/Ink.PNG" id="29_ijs1g"]
[ext_resource type="Texture2D" uid="uid://dgaom57dbdmwo" path="res://Images/Bodies/Male/Outer Bodies/Hairstyles/Hair 1.PNG" id="30_6yh2k"]
[ext_resource type="Texture2D" uid="uid://dlcgvs1aul2op" path="res://Images/Bodies/Male/Outer Bodies/Eyes/Eyes 3/Sclera.PNG" id="30_v8e1w"]
[ext_resource type="Texture2D" uid="uid://bvwipjfrl0bnl" path="res://Images/Bodies/Male/Outer Bodies/Heads/Head 1.PNG" id="31_rbl4f"]
[ext_resource type="Texture2D" uid="uid://c3mj2ulxk1jps" path="res://Images/Bodies/Male/Outer Bodies/Lips/Lips 1.PNG" id="32_3e3bj"]
[ext_resource type="Texture2D" uid="uid://bwpj0dgj8geg6" path="res://Images/Bodies/Male/Outer Bodies/Noses/Nose 1.PNG" id="33_jfa6y"]
[ext_resource type="PackedScene" uid="uid://c8htou0r68ljb" path="res://Prefabs/NPC.tscn" id="46_hu5np"]
[ext_resource type="PackedScene" uid="uid://c8sd7f6shkee6" path="res://Prefabs/ButtonPlaceHolder.tscn" id="86_vsxkr"]
[ext_resource type="Texture2D" uid="uid://2i2unxj3453e" path="res://Images/UI/X-Ray Stuff/X-ray Helper.png" id="87_kyekx"]

[sub_resource type="Resource" id="Resource_nnvhd"]
script = ExtResource("22_n64gu")
irisInk = ExtResource("28_6ywi3")
irisColour = ExtResource("27_kvtur")
sclera = ExtResource("29_i14k2")

[sub_resource type="Resource" id="Resource_a0ilo"]
script = ExtResource("22_n64gu")
irisInk = ExtResource("25_udg0u")
irisColour = ExtResource("24_pypo5")
sclera = ExtResource("26_yeq8w")

[sub_resource type="Resource" id="Resource_gqcxi"]
script = ExtResource("22_n64gu")
irisInk = ExtResource("29_ijs1g")
irisColour = ExtResource("28_iaf5f")
sclera = ExtResource("30_v8e1w")

[sub_resource type="Curve" id="Curve_itk1r"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Animation" id="Animation_g18b4"]
resource_name = "SlideIn"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1940, 0), Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_wxh5w"]
resource_name = "SlideOut"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(1940, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ichax"]
_data = {
"SlideIn": SubResource("Animation_g18b4"),
"SlideOut": SubResource("Animation_wxh5w")
}

[sub_resource type="Animation" id="Animation_cedn0"]
resource_name = "LowerDown"
length = 1.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-1, -319), Vector2(-1, 397)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../X-Ray Manager")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.7),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"PullUpScanScreen"
}]
}

[sub_resource type="Animation" id="Animation_or78j"]
resource_name = "RiseUp"
length = 1.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-1, 397), Vector2(-1, -319)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vwso4"]
_data = {
"LowerDown": SubResource("Animation_cedn0"),
"RiseUp": SubResource("Animation_or78j")
}

[node name="Main" type="Node2D"]

[node name="Control" parent="." instance=ExtResource("1_jf3cv")]

[node name="NPCCreator" type="Node" parent="." node_paths=PackedStringArray("NPC")]
script = ExtResource("1_olf47")
NPC = NodePath("../NPC")
skinColours = PackedColorArray(1, 0.858824, 0.67451, 1, 0.945098, 0.760784, 0.490196, 1, 0.878431, 0.67451, 0.411765, 1, 0.776471, 0.52549, 0.258824, 1, 0.552941, 0.333333, 0.141176, 1, 0.301961, 0.176471, 0.0705882, 1)
shirtColours = PackedColorArray(0.890196, 0.32549, 0, 1, 0.156863, 0.607843, 0.388235, 1, 0.698039, 0, 0, 1, 0.921569, 1, 0.231373, 1, 0, 0, 0.556863, 1)
hairColours = PackedColorArray(0, 0, 0, 1, 0.411765, 0.231373, 0, 1, 1, 1, 1, 1, 1, 0.921569, 0.431373, 1, 1, 0.533333, 0, 1, 0.717647, 0, 0, 1)
lipColours = PackedColorArray(0.976471, 0.529412, 0.529412, 1, 0.905882, 0.415686, 0.415686, 1, 0.839216, 0.356863, 0.356863, 1, 0.756863, 0.294118, 0.294118, 1, 0.721569, 0.247059, 0.247059, 1)
eyeColours = PackedColorArray(0, 0, 0, 1, 0.388235, 0.231373, 0.211765, 1, 0, 0.866667, 1, 1, 0, 1, 0.592157, 1, 1, 0.313726, 0.247059, 1)
heads = Array[Texture2D]([ExtResource("31_rbl4f"), ExtResource("3_uil03"), ExtResource("4_udkc8")])
lips = Array[Texture2D]([ExtResource("32_3e3bj"), ExtResource("6_kpexn"), ExtResource("7_3hp3w")])
noses = Array[Texture2D]([ExtResource("33_jfa6y"), ExtResource("9_ht1l8"), ExtResource("10_78i85")])
hairstyles = Array[Texture2D]([ExtResource("30_6yh2k"), ExtResource("12_umw15"), ExtResource("13_ioy20"), ExtResource("14_n1vce")])
ears = Array[Texture2D]([ExtResource("25_h0c38"), ExtResource("16_tfuhk"), ExtResource("17_kpjnd")])
eyes = Array[Object]([SubResource("Resource_nnvhd"), SubResource("Resource_a0ilo"), SubResource("Resource_gqcxi")])

[node name="X-Ray Manager" type="Node" parent="." node_paths=PackedStringArray("helperPlayer", "scanScreenPlayer", "xRayArea", "skeleton", "organs")]
script = ExtResource("1_k6ho4")
helperPlayer = NodePath("../BG X-Ray/Main/AnimationPlayer")
scanScreenPlayer = NodePath("../Screen X-Ray/Main/AnimationPlayer")
xRayArea = NodePath("../Screen X-Ray/Main")
skeleton = NodePath("../Screen X-Ray/Main/MaleColoured/Skeleton")
organs = NodePath("../Screen X-Ray/Main/MaleColoured/Organs")
veryTranslucentColour = Color(1, 1, 1, 0.00392157)
highlightColour = Color(1, 0, 0, 1)

[node name="NPCController" type="Node" parent="." node_paths=PackedStringArray("guy", "npcSignal")]
script = ExtResource("1_0cfmg")
guy = NodePath("../NPC")
movementSpeed = 0.5
curve = SubResource("Curve_itk1r")
npcSignal = NodePath("../Player/DialogueNPCSignal")

[node name="DialogueHandler" parent="." node_paths=PackedStringArray("encounteredNPCSignalHolder") instance=ExtResource("3_m45lx")]
encounteredNPCSignalHolder = NodePath("../Player/DialogueNPCSignal")
noIconBubble = ExtResource("3_jli1w")

[node name="GameManager" type="Node" parent="."]
script = ExtResource("11_g7kqk")

[node name="Player" type="Node2D" parent="."]

[node name="DialogueNPCSignal" parent="Player" node_paths=PackedStringArray("npcController") instance=ExtResource("2_sniyy")]
npcController = NodePath("../../NPCController")

[node name="WorkingArea" type="Node2D" parent="."]

[node name="BG" type="Node2D" parent="WorkingArea"]
z_index = 6

[node name="Sky" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(960, 540)
texture = ExtResource("2_kjyi1")

[node name="Stars" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(960, 540)
texture = ExtResource("3_vvaag")

[node name="FullSnow" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(972, 538)
texture = ExtResource("4_uow0l")

[node name="Window" type="Node2D" parent="WorkingArea"]
z_index = 8

[node name="Glass" type="Sprite2D" parent="WorkingArea/Window"]
self_modulate = Color(1, 1, 1, 0.172549)
position = Vector2(960, 540)
texture = ExtResource("6_3eqmv")

[node name="Frame" type="Sprite2D" parent="WorkingArea/Window"]
position = Vector2(960, 538)
texture = ExtResource("4_j4hjr")

[node name="Wall" type="Sprite2D" parent="WorkingArea"]
z_index = 9
position = Vector2(960, 540)
texture = ExtResource("2_4kdnl")

[node name="Desk" type="Sprite2D" parent="WorkingArea"]
z_index = 10
position = Vector2(960, 540)
texture = ExtResource("3_rf5ro")

[node name="WallwithWindow" type="Sprite2D" parent="WorkingArea"]
z_index = 6
position = Vector2(960, 540)
texture = ExtResource("13_4jyuk")

[node name="ButtonsTemp" type="Node2D" parent="."]
position = Vector2(1339, 317)

[node name="Ring Button" parent="ButtonsTemp" instance=ExtResource("86_vsxkr")]
offset_left = 0.0
offset_top = 0.0
offset_right = 136.0
offset_bottom = 136.0

[node name="Temp Talk Button" type="Button" parent="ButtonsTemp"]
visible = false
self_modulate = Color(1, 0, 1, 1)
z_index = 9
offset_left = 1.0
offset_top = 156.0
offset_right = 137.0
offset_bottom = 292.0
icon = ExtResource("10_w5o83")

[node name="Admit Button" type="Button" parent="ButtonsTemp"]
visible = false
self_modulate = Color(0.168627, 1, 0, 1)
z_index = 9
offset_left = 172.0
offset_right = 308.0
offset_bottom = 136.0
icon = ExtResource("10_w5o83")

[node name="X Ray Button" type="Button" parent="ButtonsTemp"]
self_modulate = Color(0.894118, 0, 0.133333, 1)
z_index = 9
offset_left = 172.0
offset_top = 156.0
offset_right = 308.0
offset_bottom = 292.0
icon = ExtResource("10_w5o83")

[node name="Screen X-Ray" type="Node2D" parent="."]
position = Vector2(960, 540)

[node name="Main" parent="Screen X-Ray" instance=ExtResource("15_88key")]
position = Vector2(1940, 0)

[node name="Close Scan Area Button" parent="Screen X-Ray/Main" instance=ExtResource("86_vsxkr")]
offset_left = 820.0
offset_top = 414.0
offset_right = 956.0
offset_bottom = 550.0
scale = Vector2(0.740545, 0.740545)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Screen X-Ray/Main"]
libraries = {
"": SubResource("AnimationLibrary_ichax")
}

[node name="BG X-Ray" type="Node2D" parent="."]
position = Vector2(522, -219)

[node name="Main" type="Node2D" parent="BG X-Ray"]
z_index = 6
position = Vector2(-1, -319)

[node name="Sprite2D" type="Sprite2D" parent="BG X-Ray/Main"]
self_modulate = Color(0, 0, 0, 1)
texture = ExtResource("87_kyekx")

[node name="AnimationPlayer" type="AnimationPlayer" parent="BG X-Ray/Main"]
libraries = {
"": SubResource("AnimationLibrary_vwso4")
}

[node name="NPC" parent="." instance=ExtResource("46_hu5np")]

[connection signal="pressed" from="ButtonsTemp/Ring Button" to="NPCController" method="Ring"]
[connection signal="pressed" from="ButtonsTemp/Temp Talk Button" to="Player/DialogueNPCSignal" method="LookForNPCs"]
[connection signal="pressed" from="ButtonsTemp/Admit Button" to="NPCController" method="Admit"]
[connection signal="pressed" from="ButtonsTemp/X Ray Button" to="X-Ray Manager" method="StartScan"]
[connection signal="pressed" from="Screen X-Ray/Main/Scan Skeleton Button" to="X-Ray Manager" method="ScanSkeleton"]
[connection signal="pressed" from="Screen X-Ray/Main/Scan Organs Button" to="X-Ray Manager" method="ScanOrgans"]
[connection signal="pressed" from="Screen X-Ray/Main/Close Scan Area Button" to="X-Ray Manager" method="CloseScanScreen"]

[editable path="Screen X-Ray/Main"]
[editable path="Screen X-Ray/Main/MaleColoured"]
[editable path="NPC"]
