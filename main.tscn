[gd_scene load_steps=29 format=3 uid="uid://bburjqwqg71by"]

[ext_resource type="Script" path="res://Scripts/NPCController.cs" id="1_0cfmg"]
[ext_resource type="Script" path="res://Scripts/XRayManager.cs" id="1_k6ho4"]
[ext_resource type="Texture2D" uid="uid://c3rud0nehsh34" path="res://Images/UI/Main/Wall.PNG" id="2_4kdnl"]
[ext_resource type="Texture2D" uid="uid://wbo7yx08rfpd" path="res://Images/UI/Main/BG/Sky.PNG" id="2_kjyi1"]
[ext_resource type="PackedScene" uid="uid://cfghkkaxcybkb" path="res://modules/DialogueManagerPrerequisites/Scenes/DialogueNPCSignal.tscn" id="2_sniyy"]
[ext_resource type="PackedScene" uid="uid://dd2a8ofih5akl" path="res://modules/DialogueManagerPrerequisites/Balloons/noIconBalloon.tscn" id="3_jli1w"]
[ext_resource type="PackedScene" uid="uid://bvuujxl634baj" path="res://modules/DialogueManagerPrerequisites/Scenes/DialogueHandler.tscn" id="3_m45lx"]
[ext_resource type="Texture2D" uid="uid://vpbu0uxfwxlc" path="res://Images/UI/Main/Desk.PNG" id="3_rf5ro"]
[ext_resource type="Texture2D" uid="uid://b7dv1iker83r1" path="res://Images/UI/Main/BG/Stars.PNG" id="3_vvaag"]
[ext_resource type="Texture2D" uid="uid://bhvhrtw5kwanc" path="res://Images/UI/Main/Window/Frame.PNG" id="4_j4hjr"]
[ext_resource type="Texture2D" uid="uid://bywk20ymwnqkw" path="res://Images/UI/Main/BG/Snow/Full Snow.PNG" id="4_uow0l"]
[ext_resource type="Texture2D" uid="uid://48xteqc42tnf" path="res://Images/UI/Main/Window/White Glass.png" id="6_3eqmv"]
[ext_resource type="Texture2D" uid="uid://cnx5r3bennc7u" path="res://icon.svg" id="10_w5o83"]
[ext_resource type="Script" path="res://Scripts/GameManager.cs" id="11_g7kqk"]
[ext_resource type="Texture2D" uid="uid://cdtmgahapx0kv" path="res://Images/UI/Main/BG/Wall.png" id="13_4jyuk"]
[ext_resource type="PackedScene" uid="uid://yxo2fjmt3g1j" path="res://modules/DialogueManagerPrerequisites/Scenes/DialogueHolder.tscn" id="13_13vh2"]
[ext_resource type="PackedScene" uid="uid://cln1k7d7si5eo" path="res://Prefabs/XRayArea.tscn" id="15_88key"]
[ext_resource type="Resource" uid="uid://501vfo16j2ea" path="res://Dialogue/Test/Test.dialogue" id="15_i1ce5"]
[ext_resource type="Texture2D" uid="uid://b77027piryngm" path="res://Images/Hollow.png" id="16_yj2nx"]
[ext_resource type="PackedScene" uid="uid://c8sd7f6shkee6" path="res://Prefabs/ButtonPlaceHolder.tscn" id="86_vsxkr"]
[ext_resource type="Texture2D" uid="uid://2i2unxj3453e" path="res://Images/UI/X-Ray Stuff/X-ray Helper.png" id="87_kyekx"]

[sub_resource type="Curve" id="Curve_itk1r"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Animation" id="Animation_g18b4"]
resource_name = "SlideIn"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1940, 0), Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_wxh5w"]
resource_name = "SlideOut"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(1940, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ichax"]
_data = {
"SlideIn": SubResource("Animation_g18b4"),
"SlideOut": SubResource("Animation_wxh5w")
}

[sub_resource type="Animation" id="Animation_cedn0"]
resource_name = "LowerDown"
length = 1.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-1, -319), Vector2(-1, 397)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../X-Ray Manager")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.7),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"PullUpScanScreen"
}]
}

[sub_resource type="Animation" id="Animation_or78j"]
resource_name = "RiseUp"
length = 1.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-1, 397), Vector2(-1, -319)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vwso4"]
_data = {
"LowerDown": SubResource("Animation_cedn0"),
"RiseUp": SubResource("Animation_or78j")
}

[node name="Main" type="Node2D"]

[node name="X-Ray Manager" type="Node" parent="." node_paths=PackedStringArray("helperPlayer", "scanScreenPlayer", "xRayArea", "skeleton", "organs")]
script = ExtResource("1_k6ho4")
helperPlayer = NodePath("../BG X-Ray/Main/AnimationPlayer")
scanScreenPlayer = NodePath("../Screen X-Ray/Main/AnimationPlayer")
xRayArea = NodePath("../Screen X-Ray/Main")
skeleton = NodePath("../Screen X-Ray/Main/MaleColoured/Skeleton")
organs = NodePath("../Screen X-Ray/Main/MaleColoured/Organs")
veryTranslucentColour = Color(1, 1, 1, 0.00392157)
highlightColour = Color(1, 0, 0, 1)

[node name="NPCController" type="Node" parent="." node_paths=PackedStringArray("guy", "npcSignal")]
script = ExtResource("1_0cfmg")
guy = NodePath("../PersonExample")
curve = SubResource("Curve_itk1r")
npcSignal = NodePath("../Player/DialogueNPCSignal")

[node name="DialogueHandler" parent="." node_paths=PackedStringArray("encounteredNPCSignalHolder") instance=ExtResource("3_m45lx")]
encounteredNPCSignalHolder = NodePath("../Player/DialogueNPCSignal")
noIconBubble = ExtResource("3_jli1w")

[node name="GameManager" type="Node" parent="."]
script = ExtResource("11_g7kqk")

[node name="Player" type="Node2D" parent="."]

[node name="DialogueNPCSignal" parent="Player" node_paths=PackedStringArray("npcController") instance=ExtResource("2_sniyy")]
npcController = NodePath("../../NPCController")

[node name="WorkingArea" type="Node2D" parent="."]

[node name="BG" type="Node2D" parent="WorkingArea"]
z_index = 6

[node name="Sky" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(960, 540)
texture = ExtResource("2_kjyi1")

[node name="Stars" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(960, 540)
texture = ExtResource("3_vvaag")

[node name="FullSnow" type="Sprite2D" parent="WorkingArea/BG"]
position = Vector2(972, 538)
texture = ExtResource("4_uow0l")

[node name="Window" type="Node2D" parent="WorkingArea"]
z_index = 8

[node name="Glass" type="Sprite2D" parent="WorkingArea/Window"]
self_modulate = Color(1, 1, 1, 0.172549)
position = Vector2(960, 540)
texture = ExtResource("6_3eqmv")

[node name="Frame" type="Sprite2D" parent="WorkingArea/Window"]
position = Vector2(960, 538)
texture = ExtResource("4_j4hjr")

[node name="Wall" type="Sprite2D" parent="WorkingArea"]
z_index = 9
position = Vector2(960, 540)
texture = ExtResource("2_4kdnl")

[node name="Desk" type="Sprite2D" parent="WorkingArea"]
z_index = 10
position = Vector2(960, 540)
texture = ExtResource("3_rf5ro")

[node name="WallwithWindow" type="Sprite2D" parent="WorkingArea"]
z_index = 6
position = Vector2(960, 540)
texture = ExtResource("13_4jyuk")

[node name="ButtonsTemp" type="Node2D" parent="."]
position = Vector2(1339, 317)

[node name="Ring Button" parent="ButtonsTemp" instance=ExtResource("86_vsxkr")]
offset_left = 0.0
offset_top = 0.0
offset_right = 136.0
offset_bottom = 136.0

[node name="Temp Talk Button" type="Button" parent="ButtonsTemp"]
visible = false
self_modulate = Color(1, 0, 1, 1)
z_index = 9
offset_left = 1.0
offset_top = 156.0
offset_right = 137.0
offset_bottom = 292.0
icon = ExtResource("10_w5o83")

[node name="Admit Button" type="Button" parent="ButtonsTemp"]
visible = false
self_modulate = Color(0.168627, 1, 0, 1)
z_index = 9
offset_left = 172.0
offset_right = 308.0
offset_bottom = 136.0
icon = ExtResource("10_w5o83")

[node name="X Ray Button" type="Button" parent="ButtonsTemp"]
self_modulate = Color(0.894118, 0, 0.133333, 1)
z_index = 9
offset_left = 172.0
offset_top = 156.0
offset_right = 308.0
offset_bottom = 292.0
icon = ExtResource("10_w5o83")

[node name="Screen X-Ray" type="Node2D" parent="."]
position = Vector2(960, 540)

[node name="Main" parent="Screen X-Ray" instance=ExtResource("15_88key")]
position = Vector2(1940, 0)

[node name="Close Scan Area Button" parent="Screen X-Ray/Main" instance=ExtResource("86_vsxkr")]
offset_left = 820.0
offset_top = 414.0
offset_right = 956.0
offset_bottom = 550.0
scale = Vector2(0.740545, 0.740545)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Screen X-Ray/Main"]
libraries = {
"": SubResource("AnimationLibrary_ichax")
}

[node name="PersonExample" type="Node2D" parent="."]
z_index = 7
position = Vector2(-236, 438)
scale = Vector2(0.28402, 0.28402)

[node name="Sprite2D" type="Sprite2D" parent="PersonExample"]
texture = ExtResource("16_yj2nx")

[node name="DialogueHolder" parent="PersonExample" instance=ExtResource("13_13vh2")]
characterName = &"Schwarzeaugen"
dialogue = ExtResource("15_i1ce5")
sfxName = &"creepyTW"

[node name="BG X-Ray" type="Node2D" parent="."]
position = Vector2(522, -219)

[node name="Main" type="Node2D" parent="BG X-Ray"]
z_index = 6
position = Vector2(-1, -319)

[node name="Sprite2D" type="Sprite2D" parent="BG X-Ray/Main"]
self_modulate = Color(0, 0, 0, 1)
texture = ExtResource("87_kyekx")

[node name="AnimationPlayer" type="AnimationPlayer" parent="BG X-Ray/Main"]
libraries = {
"": SubResource("AnimationLibrary_vwso4")
}

[connection signal="pressed" from="ButtonsTemp/Ring Button" to="NPCController" method="Ring"]
[connection signal="pressed" from="ButtonsTemp/Temp Talk Button" to="Player/DialogueNPCSignal" method="LookForNPCs"]
[connection signal="pressed" from="ButtonsTemp/Admit Button" to="NPCController" method="Admit"]
[connection signal="pressed" from="ButtonsTemp/X Ray Button" to="X-Ray Manager" method="StartScan"]
[connection signal="pressed" from="Screen X-Ray/Main/Scan Skeleton Button" to="X-Ray Manager" method="ScanSkeleton"]
[connection signal="pressed" from="Screen X-Ray/Main/Close Scan Area Button" to="X-Ray Manager" method="CloseScanScreen"]
[connection signal="pressed" from="Screen X-Ray/Main/Scan Organs Button" to="X-Ray Manager" method="ScanOrgans"]

[editable path="Screen X-Ray/Main"]
[editable path="Screen X-Ray/Main/MaleColoured"]
